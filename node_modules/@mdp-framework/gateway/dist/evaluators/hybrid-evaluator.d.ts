/**
 * Hybrid Evaluator (Stream 2)
 *
 * Combines pattern-matching evaluators with AI fallback.
 * Strategy: Fast pattern-matching first, AI for complex cases.
 *
 * Benefits:
 * - Speed: Pattern-matching is instant (<100ms)
 * - Cost: Only use AI when needed
 * - Accuracy: AI handles edge cases pattern-matching misses
 */
import type { PolicyEvaluator, AIEvaluator, EvaluationContext, EvaluationResult, AIEvaluationMetadata } from './types.js';
import type { PolicyCard } from '@mdp-framework/schemas/contracts';
export interface HybridEvaluatorOptions {
    /**
     * Always use AI, even if pattern-matching succeeds
     * Useful for validating/comparing results
     * @default false
     */
    alwaysUseAI?: boolean;
    /**
     * Use AI when pattern-matching finds no violations
     * Helps catch edge cases
     * @default false
     */
    aiOnNoViolations?: boolean;
    /**
     * Maximum cost threshold (USD) before falling back to pattern-matching only
     * @default undefined (no limit)
     */
    maxCostUsd?: number;
}
/**
 * Hybrid evaluator that combines pattern-matching with AI
 *
 * Evaluation strategy:
 * 1. Try pattern-matching evaluator first (if available)
 * 2. If pattern-matching succeeds, use those results
 * 3. If pattern-matching fails or unavailable, use AI
 * 4. Track which path was used in metadata
 */
export declare class HybridEvaluator implements AIEvaluator {
    private patternEvaluator;
    private aiEvaluator;
    private options;
    readonly id: string;
    readonly supportedPolicies: string[];
    constructor(patternEvaluator: PolicyEvaluator | null, aiEvaluator: AIEvaluator, options?: HybridEvaluatorOptions);
    /**
     * Check if this evaluator can handle a policy
     */
    canEvaluate(policy: PolicyCard): boolean;
    /**
     * Evaluate policy using hybrid strategy
     */
    evaluate(context: EvaluationContext): Promise<EvaluationResult & {
        metadata?: AIEvaluationMetadata;
    }>;
    /**
     * Estimate cost of evaluation
     * Returns pattern-matching cost (0) if available, otherwise AI cost
     */
    estimateCost(context: EvaluationContext): Promise<{
        tokens: number;
        cost_usd: number;
        model: string;
    }>;
    /**
     * Evaluate using pattern-matching evaluator
     */
    private evaluateWithPatternMatching;
    /**
     * Evaluate using AI evaluator
     */
    private evaluateWithAI;
}
/**
 * Factory function to create hybrid evaluator
 *
 * @param patternEvaluator - Optional pattern-matching evaluator
 * @param aiEvaluator - AI evaluator to use as fallback or primary
 * @param options - Hybrid evaluation options
 */
export declare function createHybridEvaluator(patternEvaluator: PolicyEvaluator | null, aiEvaluator: AIEvaluator, options?: HybridEvaluatorOptions): HybridEvaluator;
//# sourceMappingURL=hybrid-evaluator.d.ts.map