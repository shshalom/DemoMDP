/**
 * PostgresCapsuleStore
 *
 * Postgres-based backend for team/org shared state
 * Table: mdp_capsules with JSONB document storage
 */
import { type StateCapsule } from '@mdp-framework/schemas/contracts';
import { type CapsuleStore, type CapsuleStoreConfig, type StoreResult, type StoreError, type ListOptions, type PruneResult, type ExportEntry } from './types.js';
/**
 * PostgresCapsuleStore implementation
 */
export declare class PostgresCapsuleStore implements CapsuleStore {
    private pool;
    private retention;
    private initialized;
    constructor(config: CapsuleStoreConfig);
    /**
     * Initialize schema (idempotent)
     */
    private ensureSchema;
    get(id: string): Promise<StoreResult<StateCapsule>>;
    put(capsule: StateCapsule): Promise<StoreResult<void>>;
    merge(id: string, patch: Partial<StateCapsule>): Promise<StoreResult<StateCapsule>>;
    delete(id: string): Promise<StoreResult<void>>;
    exists(id: string): Promise<boolean>;
    list(options?: ListOptions): Promise<StoreResult<string[]>>;
    getMany(ids: string[]): Promise<StoreResult<Map<string, StateCapsule>>>;
    prune(dryRun?: boolean): Promise<StoreResult<PruneResult>>;
    private getPruneReasons;
    export(options?: ListOptions): AsyncIterable<ExportEntry>;
    import(entries: AsyncIterable<ExportEntry>, overwrite?: boolean): Promise<StoreResult<{
        imported: number;
        skipped: number;
        errors: Array<{
            entry: ExportEntry;
            error: StoreError;
        }>;
    }>>;
    close(): Promise<void>;
}
/**
 * Factory function for PostgresCapsuleStore
 */
export declare function createPostgresStore(config: CapsuleStoreConfig): Promise<CapsuleStore>;
//# sourceMappingURL=postgres-store.d.ts.map