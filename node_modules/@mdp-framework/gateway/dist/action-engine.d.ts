/**
 * Action Engine (M5 - Team B)
 *
 * Executes ActionPlan with frozen verbs:
 * - gate.ci.warn, gate.ci.block
 * - remediate.suggest.patch, remediate.apply.patch, remediate.open.counter_pr
 * - notify.pr.comment, notify.slack, notify.trace
 *
 * Features:
 * - Idempotency via action keys
 * - Respects allow_enforcement flag
 * - Emits Envelopes with versioned policy_ids
 * - Error handling with ProviderError taxonomy
 */
import type { ActionPlan, Envelope, PolicyCard, StateCapsule } from '@mdp-framework/schemas/contracts';
import type { ProviderAdapter } from '@mdp-framework/adapters';
export interface ActionEngineConfig {
    mode: 'enforce' | 'report' | 'dry-run';
    allow_enforcement: boolean;
    adapter: ProviderAdapter;
    context: {
        pr_number?: number;
        head_sha?: string;
        base_branch?: string;
        repo?: string;
        [key: string]: unknown;
    };
}
export interface ActionExecutionResult {
    action: ActionPlan['actions'][0];
    status: 'completed' | 'skipped' | 'failed';
    ref?: string;
    error?: string;
    metadata?: Record<string, unknown>;
}
export interface ExecutionContext {
    config: ActionEngineConfig;
    plan: ActionPlan;
    policy?: PolicyCard;
    capsule?: StateCapsule;
    executedKeys: Set<string>;
}
export declare class ActionEngine {
    private readonly config;
    private readonly executedKeys;
    constructor(config: ActionEngineConfig);
    /**
     * Execute an ActionPlan and emit an Envelope
     */
    execute(plan: ActionPlan, options?: {
        policy?: PolicyCard;
        capsule?: StateCapsule;
    }): Promise<Envelope>;
    /**
     * Execute a single action
     */
    private executeAction;
    private executeGateWarn;
    private executeGateBlock;
    private executeSuggestPatch;
    private executeApplyPatch;
    private executeOpenCounterPr;
    private executeNotifyComment;
    private executeNotifySlack;
    private executeNotifyTrace;
    private executeJiraIssue;
    private executeEvidenceAttach;
    private computeActionKey;
    private evaluateCondition;
    private requiresEnforcement;
    private mapVerbToActionType;
    private generateTraceId;
}
/**
 * Create an ActionEngine instance
 */
export declare function createActionEngine(config: ActionEngineConfig): ActionEngine;
//# sourceMappingURL=action-engine.d.ts.map