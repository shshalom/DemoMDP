{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "https://mdp-framework.dev/schemas/architect-decision.json",
    "title": "Architect Decision Schema",
    "description": "Schema for Architect agent decision output",
    "type": "object",
    "required": ["components", "architecture_decisions"],
    "properties": {
        "policy_compliance": {
            "type": "array",
            "description": "Architecture policy compliance review",
            "items": {
                "type": "object",
                "required": ["policy_id", "compliant"],
                "properties": {
                    "policy_id": {
                        "type": "string",
                        "description": "Policy identifier"
                    },
                    "compliant": {
                        "type": "boolean",
                        "description": "Whether design is compliant"
                    },
                    "notes": {
                        "type": "string",
                        "description": "Compliance assessment notes"
                    },
                    "recommendations": {
                        "type": "string",
                        "description": "Recommendations for compliance"
                    }
                }
            }
        },
        "components": {
            "type": "array",
            "description": "Component design specifications",
            "items": {
                "type": "object",
                "required": ["name", "type", "purpose", "rationale"],
                "properties": {
                    "name": {
                        "type": "string",
                        "description": "Component name"
                    },
                    "type": {
                        "type": "string",
                        "enum": ["new", "modify", "reuse"],
                        "description": "Component type"
                    },
                    "purpose": {
                        "type": "string",
                        "minLength": 10,
                        "description": "Component purpose"
                    },
                    "interfaces": {
                        "type": "array",
                        "items": { "type": "string" },
                        "description": "Component interfaces"
                    },
                    "dependencies": {
                        "type": "array",
                        "items": { "type": "string" },
                        "description": "Component dependencies"
                    },
                    "rationale": {
                        "type": "string",
                        "minLength": 10,
                        "description": "Design rationale"
                    }
                }
            },
            "minItems": 1
        },
        "data_models": {
            "type": "array",
            "description": "Data model specifications",
            "items": {
                "type": "object",
                "required": ["name", "fields"],
                "properties": {
                    "name": {
                        "type": "string",
                        "description": "Model name"
                    },
                    "fields": {
                        "type": "array",
                        "items": { "type": "string" },
                        "description": "Model fields"
                    },
                    "relationships": {
                        "type": "array",
                        "items": { "type": "string" },
                        "description": "Model relationships"
                    },
                    "rationale": {
                        "type": "string",
                        "description": "Model design rationale"
                    }
                }
            }
        },
        "architecture_decisions": {
            "type": "array",
            "description": "Architectural decisions made",
            "items": {
                "type": "object",
                "required": ["question", "answer", "reasoning"],
                "properties": {
                    "question": {
                        "type": "string",
                        "minLength": 10,
                        "description": "Decision question"
                    },
                    "answer": {
                        "type": "string",
                        "minLength": 10,
                        "description": "Architectural decision"
                    },
                    "reasoning": {
                        "type": "string",
                        "minLength": 20,
                        "description": "Technical rationale"
                    },
                    "alternatives_considered": {
                        "type": "array",
                        "items": { "type": "string" },
                        "description": "Alternative approaches evaluated"
                    },
                    "trade_offs": {
                        "type": "string",
                        "description": "Trade-offs and implications"
                    },
                    "confidence": {
                        "type": "number",
                        "minimum": 0,
                        "maximum": 1,
                        "description": "Confidence level"
                    }
                }
            },
            "minItems": 1
        },
        "technical_constraints": {
            "type": "array",
            "description": "Technical constraints",
            "items": {
                "type": "object",
                "required": ["category", "constraint"],
                "properties": {
                    "category": {
                        "type": "string",
                        "enum": ["performance", "security", "scalability", "compatibility"],
                        "description": "Constraint category"
                    },
                    "constraint": {
                        "type": "string",
                        "description": "Specific constraint"
                    },
                    "rationale": {
                        "type": "string",
                        "description": "Why this constraint matters"
                    }
                }
            }
        },
        "risks": {
            "type": "array",
            "description": "Architectural risks",
            "items": {
                "type": "object",
                "required": ["category", "severity", "description"],
                "properties": {
                    "category": {
                        "type": "string",
                        "enum": ["technical_debt", "scalability", "security", "integration"],
                        "description": "Risk category"
                    },
                    "severity": {
                        "type": "string",
                        "enum": ["high", "medium", "low"],
                        "description": "Risk severity"
                    },
                    "description": {
                        "type": "string",
                        "description": "Risk description"
                    },
                    "mitigation": {
                        "type": "string",
                        "description": "Mitigation strategy"
                    }
                }
            }
        },
        "integration_points": {
            "type": "array",
            "description": "Integration specifications",
            "items": {
                "type": "object",
                "required": ["component", "interface_type", "description"],
                "properties": {
                    "component": {
                        "type": "string",
                        "description": "Component name"
                    },
                    "interface_type": {
                        "type": "string",
                        "enum": ["REST", "GraphQL", "Event", "Database", "Other"],
                        "description": "Interface type"
                    },
                    "description": {
                        "type": "string",
                        "description": "Integration description"
                    }
                }
            }
        },
        "next_steps": {
            "type": "array",
            "items": { "type": "string" },
            "description": "Guidance for engineer"
        }
    }
}
