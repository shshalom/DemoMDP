{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "https://mdp-framework.dev/schemas/pm-decision.json",
    "title": "PM Decision Schema",
    "description": "Schema for Product Manager agent decision output",
    "type": "object",
    "required": ["requirements", "scope", "scope_rationale", "decisions"],
    "properties": {
        "requirements": {
            "type": "array",
            "description": "Identified requirements from the feature request",
            "items": {
                "type": "object",
                "required": ["id", "description", "priority"],
                "properties": {
                    "id": {
                        "type": "string",
                        "pattern": "^REQ-[0-9]+$",
                        "description": "Requirement identifier (e.g., REQ-1)"
                    },
                    "description": {
                        "type": "string",
                        "minLength": 10,
                        "description": "Clear, specific requirement description"
                    },
                    "priority": {
                        "type": "string",
                        "enum": ["high", "medium", "low"],
                        "description": "Requirement priority"
                    },
                    "rationale": {
                        "type": "string",
                        "description": "Why this requirement is needed"
                    }
                }
            },
            "minItems": 1
        },
        "scope": {
            "type": "string",
            "enum": ["small", "medium", "large"],
            "description": "Overall scope assessment"
        },
        "scope_rationale": {
            "type": "string",
            "minLength": 20,
            "description": "Explanation of scope assessment"
        },
        "dependencies": {
            "type": "array",
            "description": "Component and system dependencies",
            "items": {
                "type": "object",
                "required": ["component", "type", "description"],
                "properties": {
                    "component": {
                        "type": "string",
                        "description": "Component name"
                    },
                    "type": {
                        "type": "string",
                        "enum": ["new", "modify", "integrate"],
                        "description": "Dependency type"
                    },
                    "description": {
                        "type": "string",
                        "description": "How this component is involved"
                    }
                }
            }
        },
        "risks": {
            "type": "array",
            "description": "Identified risks",
            "items": {
                "type": "object",
                "required": ["category", "severity", "description"],
                "properties": {
                    "category": {
                        "type": "string",
                        "enum": ["technical", "business", "team"],
                        "description": "Risk category"
                    },
                    "severity": {
                        "type": "string",
                        "enum": ["high", "medium", "low"],
                        "description": "Risk severity"
                    },
                    "description": {
                        "type": "string",
                        "description": "Description of the risk"
                    },
                    "mitigation": {
                        "type": "string",
                        "description": "Suggested mitigation strategy"
                    }
                }
            }
        },
        "decisions": {
            "type": "array",
            "description": "Product decisions made by PM",
            "items": {
                "type": "object",
                "required": ["question", "answer", "reasoning"],
                "properties": {
                    "question": {
                        "type": "string",
                        "minLength": 10,
                        "description": "Decision question"
                    },
                    "answer": {
                        "type": "string",
                        "minLength": 10,
                        "description": "Decision answer"
                    },
                    "reasoning": {
                        "type": "string",
                        "minLength": 20,
                        "description": "Reasoning for the decision"
                    },
                    "confidence": {
                        "type": "number",
                        "minimum": 0,
                        "maximum": 1,
                        "description": "Confidence level (0.0-1.0)"
                    }
                }
            },
            "minItems": 1
        },
        "acceptance_criteria": {
            "type": "array",
            "description": "Feature acceptance criteria",
            "items": {
                "type": "string",
                "minLength": 10
            }
        },
        "next_steps": {
            "type": "array",
            "description": "Recommendations for next agents",
            "items": {
                "type": "string"
            }
        }
    }
}
