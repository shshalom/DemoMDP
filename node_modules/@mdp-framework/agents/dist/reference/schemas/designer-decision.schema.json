{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "https://mdp-framework.dev/schemas/designer-decision.json",
    "title": "Designer Decision Schema",
    "description": "Schema for Designer agent decision output",
    "type": "object",
    "required": ["user_flows", "components", "design_decisions"],
    "properties": {
        "user_flows": {
            "type": "array",
            "description": "User flow specifications",
            "items": {
                "type": "object",
                "required": ["name", "steps"],
                "properties": {
                    "name": {
                        "type": "string",
                        "description": "Flow name"
                    },
                    "steps": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "required": ["step", "action", "screen"],
                            "properties": {
                                "step": {
                                    "type": "number",
                                    "description": "Step number"
                                },
                                "action": {
                                    "type": "string",
                                    "description": "User action"
                                },
                                "screen": {
                                    "type": "string",
                                    "description": "Screen name"
                                },
                                "interactions": {
                                    "type": "array",
                                    "items": { "type": "string" },
                                    "description": "Interactions available"
                                }
                            }
                        }
                    },
                    "alternate_paths": {
                        "type": "array",
                        "items": { "type": "string" },
                        "description": "Alternate flow paths"
                    },
                    "error_scenarios": {
                        "type": "array",
                        "items": { "type": "string" },
                        "description": "Error scenarios"
                    }
                }
            },
            "minItems": 1
        },
        "design_compliance": {
            "type": "array",
            "description": "Design system compliance",
            "items": {
                "type": "object",
                "required": ["guideline", "compliant"],
                "properties": {
                    "guideline": {
                        "type": "string",
                        "description": "Design guideline"
                    },
                    "compliant": {
                        "type": "boolean",
                        "description": "Compliance status"
                    },
                    "notes": {
                        "type": "string",
                        "description": "Compliance notes"
                    },
                    "deviations": {
                        "type": "string",
                        "description": "Necessary deviations"
                    }
                }
            }
        },
        "components": {
            "type": "array",
            "description": "UI component specifications",
            "items": {
                "type": "object",
                "required": ["name", "type", "purpose"],
                "properties": {
                    "name": {
                        "type": "string",
                        "description": "Component name"
                    },
                    "type": {
                        "type": "string",
                        "enum": ["existing", "custom"],
                        "description": "Component type"
                    },
                    "source": {
                        "type": "string",
                        "description": "Component source"
                    },
                    "purpose": {
                        "type": "string",
                        "description": "Component purpose"
                    },
                    "states": {
                        "type": "array",
                        "items": { "type": "string" },
                        "description": "Component states"
                    },
                    "variants": {
                        "type": "array",
                        "items": { "type": "string" },
                        "description": "Component variants"
                    },
                    "accessibility_notes": {
                        "type": "string",
                        "description": "Accessibility considerations"
                    }
                }
            },
            "minItems": 1
        },
        "screens": {
            "type": "array",
            "description": "Screen specifications",
            "items": {
                "type": "object",
                "required": ["name", "purpose", "layout"],
                "properties": {
                    "name": {
                        "type": "string",
                        "description": "Screen name"
                    },
                    "purpose": {
                        "type": "string",
                        "description": "Screen purpose"
                    },
                    "layout": {
                        "type": "string",
                        "description": "Layout description"
                    },
                    "sections": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "name": { "type": "string" },
                                "components": { "type": "array", "items": { "type": "string" } },
                                "content": { "type": "string" }
                            }
                        },
                        "description": "Screen sections"
                    },
                    "responsive_behavior": {
                        "type": "string",
                        "description": "Responsive behavior"
                    }
                }
            }
        },
        "design_decisions": {
            "type": "array",
            "description": "UX decisions made",
            "items": {
                "type": "object",
                "required": ["question", "answer", "reasoning"],
                "properties": {
                    "question": {
                        "type": "string",
                        "minLength": 10,
                        "description": "Decision question"
                    },
                    "answer": {
                        "type": "string",
                        "minLength": 10,
                        "description": "Design decision"
                    },
                    "reasoning": {
                        "type": "string",
                        "minLength": 20,
                        "description": "UX rationale"
                    },
                    "user_impact": {
                        "type": "string",
                        "description": "Impact on users"
                    },
                    "confidence": {
                        "type": "number",
                        "minimum": 0,
                        "maximum": 1,
                        "description": "Confidence level"
                    }
                }
            },
            "minItems": 1
        },
        "accessibility": {
            "type": "object",
            "required": ["wcag_level"],
            "properties": {
                "wcag_level": {
                    "type": "string",
                    "enum": ["A", "AA", "AAA"],
                    "description": "WCAG compliance level"
                },
                "keyboard_navigation": {
                    "type": "string",
                    "description": "Keyboard navigation approach"
                },
                "screen_reader_support": {
                    "type": "string",
                    "description": "Screen reader support"
                },
                "color_contrast": {
                    "type": "string",
                    "description": "Color contrast ratios"
                },
                "aria_labels": {
                    "type": "array",
                    "items": { "type": "string" },
                    "description": "Required ARIA labels"
                },
                "focus_management": {
                    "type": "string",
                    "description": "Focus handling"
                }
            }
        },
        "design_tokens": {
            "type": "object",
            "properties": {
                "colors": {
                    "type": "object",
                    "additionalProperties": { "type": "string" },
                    "description": "Color tokens"
                },
                "spacing": {
                    "type": "object",
                    "additionalProperties": { "type": "string" },
                    "description": "Spacing tokens"
                },
                "typography": {
                    "type": "object",
                    "additionalProperties": { "type": "string" },
                    "description": "Typography tokens"
                },
                "breakpoints": {
                    "type": "object",
                    "additionalProperties": { "type": "string" },
                    "description": "Responsive breakpoints"
                }
            }
        },
        "risks": {
            "type": "array",
            "description": "Design risks",
            "items": {
                "type": "object",
                "required": ["category", "severity", "description"],
                "properties": {
                    "category": {
                        "type": "string",
                        "enum": ["usability", "accessibility", "complexity", "consistency"],
                        "description": "Risk category"
                    },
                    "severity": {
                        "type": "string",
                        "enum": ["high", "medium", "low"],
                        "description": "Risk severity"
                    },
                    "description": {
                        "type": "string",
                        "description": "Risk description"
                    },
                    "mitigation": {
                        "type": "string",
                        "description": "Mitigation strategy"
                    }
                }
            }
        },
        "design_artifacts": {
            "type": "array",
            "description": "Design deliverables",
            "items": {
                "type": "object",
                "required": ["type", "name", "description"],
                "properties": {
                    "type": {
                        "type": "string",
                        "enum": ["wireframe", "mockup", "prototype", "specification"],
                        "description": "Artifact type"
                    },
                    "name": {
                        "type": "string",
                        "description": "Artifact name"
                    },
                    "description": {
                        "type": "string",
                        "description": "Artifact description"
                    },
                    "location": {
                        "type": "string",
                        "description": "Artifact URI"
                    }
                }
            }
        },
        "next_steps": {
            "type": "array",
            "items": { "type": "string" },
            "description": "Design tasks to complete"
        }
    }
}
