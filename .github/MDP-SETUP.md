# MDP Governance Setup

This workflow was automatically generated from your policies by `mlang github init`.

## Policies Enforced

ios.swift.no-force-unwrap (AI-powered) - Prevent crashes by catching force unwraps in Swift code
ui.alloy.governance (AI-powered) [AOI enabled] - Enforce consistent use of Alloy Design System components across all Autodesk products to ensure design consistency, maintainability, and accessibility

## Required Secrets

- `GITHUB_TOKEN` - Automatically provided by GitHub Actions (no setup needed)
- `ANTHROPIC_API_KEY` - Required for AI policy evaluation
  - Get API key from: https://console.anthropic.com/
  - Add to: Settings → Secrets and variables → Actions → New repository secret

## Cost Estimation

Estimated cost per PR: **$0.05**

This is based on:
- 2 AI-powered policies
- Typical PR size (5-20 files)
- Claude API pricing

Costs are only incurred when PRs are opened/updated.

## How It Works

1. **Trigger**: Workflow runs when a PR is opened, synchronized, or reopened
2. **Fetch**: Retrieves PR data including file contents
3. **Evaluate**: Runs all policies against the PR changes
4. **Report**: Posts results as a PR comment
5. **Status**: Updates commit status (blocks merge if violations found)

## File Patterns

This workflow is optimized to only run on:
- `**.js`
- `**.jsx`
- `**.kt`
- `**.swift`
- `**.ts`
- `**.tsx`

## Features

- ✅ AI-powered policy evaluation using Claude
- ✅ AOI feedback loop (Architecture of Intent)
- ✅ Automated fix suggestions
- ✅ PR comment reports
- ✅ Commit status checks

## Troubleshooting

### Workflow not running?
- Check that the workflow file exists: `.github/workflows/mdp-governance.yml`
- Verify GitHub Actions is enabled for your repository
- Check workflow permissions in Settings → Actions → General

### "ANTHROPIC_API_KEY not found" error?
- Add the secret in Settings → Secrets and variables → Actions
- Make sure it's named exactly `ANTHROPIC_API_KEY`

### Workflow fails with "mlang: command not found"?
- The workflow installs mlang automatically
- Check Node.js setup step completed successfully

### High costs?
- AI evaluation only runs when policies detect potential violations
- Costs scale with PR size and number of AI-powered policies
- Consider using static policies where possible

## Next Steps

1. ✅ Workflow file created
2. ⏳ Configure required secrets (see above)
3. ⏳ Commit and push to your repository
4. ⏳ Create a test PR to verify the workflow

## Learn More

- MDP Framework: https://github.com/mdp-labs/mdp-mlang
- Documentation: https://github.com/mdp-labs/mdp-mlang/tree/main/Docs
- Policy Examples: https://github.com/mdp-labs/mdp-mlang/tree/main/examples

---

Generated by `mlang github init` on 2025-11-15
